<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>购物车</title>	
	<link rel="stylesheet" type="text/css" href="css/shoppingcart.css">
</head>
<body>
	<div class="header">
		<div id="top">
			<div class="logo"><img src="images/logo.png"></div>
			<div class="header_right">
				<div style="margin: 10px;">
					<form>
					<input type="text" name="keyword" class="search" id="search" value="搜索">
					<input type="submit" name="submit" class="btn_search" value="">
					</form>
				</div>
			</div>
		</div>
		<hr>
		<div class="nav">
			<ul class="nav1">
				<li>
					<a href="#">首页</a>
				</li>
				<li>
					<a href="#">蛋糕馆</a>
					<ul>
						<li class=""><a href="#">芝士系列</a></li>
						<li><a href="#">巧克力系列</a></li>
						<li><a href="#">慕斯系列</a></li>
						<li><a href="#">水果系列</a></li>
						<li><a href="#">乳脂系列</a></li>
						<li><a href="#">选拼系列</a></li>
					</ul>
				</li>
				<li>
					<a href="#">特惠商城</a>
				</li>
				<li>
					<a href="#">最新活动</a>
				</li>
				<li>
					<a href="#">合作专区</a>
					<ul>
						<li><a href="#">银行活动</a></li>
						<li><a href="#">公司采购</a></li>
						<li><a href="#">大客户区</a></li>
					</ul>
				</li>
				<li>
					<a href="#">礼劵兑换</a>
				</li>
				<li>
					<a href="#">品牌故事</a>
					<ul>
						<li class=""><a href="#">创建时间</a></li>
						<li><a href="#">大事件</a></li>
						<li><a href="#">研发团队</a></li>
					</ul>
				</li>
				<li>
					<a href="#">会员服务</a>
					<ul>
						<li class=""><a href="#">会员福利</a></li>
						<li><a href="#">会员商城</a></li>
					</ul>
				</li>
				<li>
					<a href="#">加入我们</a>
				</li>
			</ul>
		</div>
	</div>
	<div class="wrap">
		<div class="bottom">
			<span id="prev"><</span>
			<span id="next">></span>
		</div>
	</div>
	<div class="catbox">
 		<table id="cartTable">
 			<thead>
 				<tr>
 					<th><label><input class="check-all check" type="checkbox"/>&nbsp;&nbsp;全选</label></th>
 					<th>商品</th>
 					<th>单价</th>
 					<th>数量</th>
 					<th>小计</th>
 					<th>操作</th>
 				</tr>
 			</thead>
		 	<tbody>
		 		<tr>
		 			<td class="checkbox"><input class="check-one check" type="checkbox"/></td>
		 			<td class="goods"><img src="images/rulao.jpg" alt=""/><span>乳酪蛋糕</span></td>
		 			<td class="price">128.88</td>
				 	<td class="count"><span class="reduce"></span>
				 	<input class="count-input" type="text" value="1"/>
				 	<span class="add">+</span></td>
				 	<td class="subtotal">128.88</td>
				 	<td class="operation"><span class="delete">删除</span></td>
			 	</tr>
				 	<tr>
				 	<td class="checkbox"><input class="check-one check" type="checkbox"/></td>
				 	<td class="goods"><img src="images/shuiguo.jpg" alt=""/><span>水果蛋糕</span></td>
				 	<td class="price">88.50</td>
				 	<td class="count"><span class="reduce"></span>
				 	<input class="count-input" type="text" value="1"/>
				 	<span class="add">+</span></td>
				 	<td class="subtotal">88.50</td>
				 	<td class="operation"><span class="delete">删除</span></td>
			 	</tr>
			 	<tr>
				 	<td class="checkbox"><input class="check-one check" type="checkbox"/></td>
				 	<td class="goods"><img src="images/qiaokeli.jpg" alt=""/><span>巧克力蛋糕</span></td>
				 	<td class="price">158.50</td>
				 	<td class="count"><span class="reduce"></span>
				 	<input class="count-input" type="text" value="1"/>
				 	<span class="add">+</span></td>
				 	<td class="subtotal">158.50</td>
				 	<td class="operation"><span class="delete">删除</span></td>
			 	</tr>
			 	<tr>
				 	<td class="checkbox"><input class="check-one check" type="checkbox"/></td>
				 	<td class="goods"><img src="images/musi.jpg" alt=""/><span>慕斯蛋糕</span></td>
				 	<td class="price">99.60</td>
				 	<td class="count"><span class="reduce"></span>
				 	<input class="count-input" type="text" value="1"/>
				 	<span class="add">+</span></td>
				 	<td class="subtotal">99.60</td>
				 	<td class="operation"><span class="delete">删除</span></td>
			 	</tr>
		 	</tbody>
 		</table>
 		<div class="foot" id="foot">
 			<label class="fl select-all"><input type="checkbox" class="check-all check"/>&nbsp;&nbsp;全选</label>
 			<a class="fl delete" id="deleteAll" href="javascript:;">删除</a>
 			<div class="fr closing" onclick="getTotal();">结 算</div>
 				<input type="hidden" id="cartTotalPrice"/>
 				<div class="fr total">合计：￥<span id="priceTotal">0.00</span></div>
 			<div class="fr selected" id="selected">已选商品<span id="selectedTotal">0</span>件<spanclass="arrow up">︽</span><span class="arrow down">︾</span></div>
 			<div class="selected-view">
 				<div id="selectedViewList" class="clearfix">
 					<div><img src="images/1.jpg"><span>取消选择</span></div>
 				</div>
 			<span class="arrow">◆<span>◆</span></span></div>
 		</div>
 	</div>
 	<div class="footer">
       
        <h1><a href="#">电子信箱</a>&emsp;|&emsp;<a href="#">设为首</a>页&emsp;|&emsp;<a href="#">在线调查</a>&emsp;|&emsp;<a href="#">加入收藏</a>&emsp;|&emsp;<a href="#">网站地图</a>&emsp;|&emsp;<a href="#">关于我们</a></h1>
        <br />
        <img src="images/line.jpg" />
        <p>Copyright©2013-2014 pinxiangyuan.com，All Rights Reserved</p>
</div>
</body>
<script>
	var wrap = document.getElementsByClassName('wrap')[0];
	var imgs= wrap.getElementsByTagName('a');
	var prev=document.getElementById('prev');
	var next=document.getElementById('next');
	var nav=document.getElementsByClassName('nav1')[0];
	var li=nav.getElementsByTagName('li');
	var i=0;
	function imgTab(){
		imgs[i%9].style.display='none';
		i++
		imgs[i%9].style.display='block';
	}
	var timer=setInterval(imgTab,1000);
	wrap.onmouseover = function(){
		clearInterval(timer)
	}
	wrap.onmouseout = function(){
		timer=setInterval(imgTab,1000);
	}
	prev.onclick = function(){
		imgs[i%9].style.display='none';
		i=(i+8)%9;
		imgs[i%9].style.display='block';
	}
	next.onclick = function(){
		imgTab();
	}
	for(i=0;i<li.length;i++)
	{
		li[i].onmouseover=function(){
			this.className="nav2";
		}
		li[i].onmouseout=function(){
			this.className="";
		}
	}
	var addList = document.querySelectorAll(".add");
 	for (var i = 0; i < addList.length; i++) {
 		addList[i].onclick = function () {
 			var countInput = preEle(this);
 			var reduceSpan = preEle(countInput);
 			countInput.value = countInput.value * 1 + 1;
 			reduceSpan.innerHTML = "-";
 			updateSubtotal(this.parentNode, countInput.value * 1);
 			updateFooter();
 		}
 	}
 	var reduceList = document.querySelectorAll(".reduce");
 	for (var i = 0; i < reduceList.length; i++) {
 		reduceList[i].onclick = function () {
 			var countInput = nextEle(this);
 			if (countInput.value > 1) { 
 				countInput.value -= 1;
 				if (countInput.value == 1) {
 					this.innerHTML = "";
 				}
 			updateSubtotal(this.parentNode, countInput.value * 1);
 			updateFooter();
 			} else {
 				this.innerHTML = "";
 			}
 		}
 	}
 	var chekAll = document.querySelector(".check-all");
 	var check = document.querySelectorAll(".check-one");
 	chekAll.onclick = function () {
 		for (var i = 0; i < check.length; i++) {
 			check[i].checked = this.checked;
 		}
 		updateFooter();
 	}
 	for (var i = 0; i < check.length; i++) {
 		check[i].onclick = function () {
 			updateFooter();
 		}
 	}
 	var deleteList = document.querySelectorAll(".delete");
 	for (var i = 0; i < deleteList.length; i++) {
 		deleteList[i].onclick = function () {
 			this.parentNode.parentNode.parentNode.removeChild(this.parentNode.parentNode);
 			updateFooter();
 		}
 	}
 	function updateFooter() {
 		var checkOneList = document.querySelectorAll(".check-one");
 		var selectedTotal = document.querySelector("#selectedTotal");
 		var priceTotal = document.querySelector("#priceTotal");
 		var allCount = 0;
 		var allPrice = 0
 		for (var i = 0; i < checkOneList.length; i++) {
 			if (checkOneList[i].checked) {
 				var num = checkOneList[i].parentNode.parentNode.children[3].children[1].value * 1;
 				allCount += num;
 				var total = checkOneList[i].parentNode.parentNode.children[4].innerHTML * 1;
 				allPrice += total;
 			}
 		}
 		selectedTotal.innerHTML = allCount;
 		priceTotal.innerHTML = allPrice.toFixed(2);
 	}
 	function updateSubtotal(parentTd, count) {
 		var price = preEle(parentTd).innerHTML * 1;
 		var subtotalSpan = nextEle(parentTd);
 		var total = price * count;
 		subtotalSpan.innerHTML = total.toFixed(2);
 	}
 	function nextEle(obj) {
 		if (obj.nextElementSibling) {
 			return obj.nextElementSibling;
 		} else {
 			return obj.nextSibling;
 		}
 	}
 	function preEle(obj) {
 		if (obj.previousElementSibling) {
 			return obj.previousElementSibling;
 		} else {
 			return obj.previousSibling;
 		}
 	}
</script>
</html>